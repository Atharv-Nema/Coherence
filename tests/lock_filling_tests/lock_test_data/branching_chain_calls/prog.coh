func chain1() => unit {
    atomic { 
        var lock_var: int locked<A> = (new[1] int(1));
        lock_var[0]; 
    }
    return chain2();
}

func chain2() => unit {
    atomic { 
        var lock_var: int locked<B> = (new[1] int(1));
        lock_var[0]; 
    }
    branch_left();
    branch_right();
    return ();
}

func branch_left() => unit {
    atomic { 
        var lock_var: int locked<C> = (new[1] int(1));
        lock_var[0]; 
    }
    return ();
}

func branch_right() => unit {
    atomic { 
        var lock_var: int locked<D> = (new[1] int(1));
        lock_var[0]; 
    }
    return ();
}

actor Main {
    new create() {}
}